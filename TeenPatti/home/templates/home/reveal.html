{% extends "home/base.html" %}

{% block content %}
<head>
    <title>Game Results</title>
</head>
<body>
  <h2>Game Results</h2>

  <ul>
    {% for player, rank_num, card_vals, rank_name in evaluated %}
      <li>
        {% if player == winner %}
          🏆 <strong>
            {% if player.is_bot %}
              🤖 Bot {{ forloop.counter }}
            {% else %}
              {{ player.user.email }}
            {% endif %}
          </strong>: {{ rank_name }} ({{ player.card }}) – Score: {{ player.score }}
        {% else %}
          ❌ {% if player.is_bot %}
                🤖 Bot {{ forloop.counter }}
              {% else %}
                {{ player.user.email }}
              {% endif %}:
          {{ rank_name }} ({{ player.card }}) – Score: {{ player.score }}
        {% endif %}
      </li>
    {% endfor %}
  </ul>

  <!-- 🚀 Correct Winner Line -->
  <h3>🏆 Winner: 
    {% if winner.is_bot %}
      🤖 Bot
    {% else %}
      {% if winner.user == request.user %}
        🧑 You
      {% else %}
        {{ winner.user.email }}
      {% endif %}
    {% endif %}
  </h3>

  <br>

  <div style="margin-top: 20px;">
    <!-- 🔁 Play Again Button -->
    <a href="/start/{{ room_code }}/">
      <button style="padding: 10px 20px; font-size: 16px;">🔁 Play Again</button>
    </a>

    <!-- 🧹 Reset Score Button -->
    <a href="/reset/{{ room_code }}/" style="margin-left: 10px;">
      <button style="padding: 10px 20px; font-size: 16px;">🧹 Reset Scores</button>
    </a>

    <!-- 🏠 Back to Lobby -->
    <a href="/lobby/" style="margin-left: 10px;">
      <button style="padding: 10px 20px; font-size: 16px;">🏠 Back to Lobby</button>
    </a>
  </div>
</body>
{% endblock %}
