{% extends "home/base.html" %}

{% block content %}
<head>
    <title>Game Results</title>
</head>
<body>
  <h2>Game Results</h2>

  <ul>
    {% for player, rank_num, card_vals, rank_name in evaluated %}
      <li>
        {% if player == winner %}
          ğŸ† <strong>
            {% if player.is_bot %}
              ğŸ¤– Bot {{ forloop.counter }}
            {% else %}
              {{ player.user.email }}
            {% endif %}
          </strong>: {{ rank_name }} ({{ player.card }}) â€“ Score: {{ player.score }}
        {% else %}
          âŒ {% if player.is_bot %}
                ğŸ¤– Bot {{ forloop.counter }}
              {% else %}
                {{ player.user.email }}
              {% endif %}:
          {{ rank_name }} ({{ player.card }}) â€“ Score: {{ player.score }}
        {% endif %}
      </li>
    {% endfor %}
  </ul>

  <!-- ğŸš€ Correct Winner Line -->
  <h3>ğŸ† Winner: 
    {% if winner.is_bot %}
      ğŸ¤– Bot
    {% else %}
      {% if winner.user == request.user %}
        ğŸ§‘ You
      {% else %}
        {{ winner.user.email }}
      {% endif %}
    {% endif %}
  </h3>

  <br>

  <div style="margin-top: 20px;">
    <!-- ğŸ” Play Again Button -->
    <a href="/start/{{ room_code }}/">
      <button style="padding: 10px 20px; font-size: 16px;">ğŸ” Play Again</button>
    </a>

    <!-- ğŸ§¹ Reset Score Button -->
    <a href="/reset/{{ room_code }}/" style="margin-left: 10px;">
      <button style="padding: 10px 20px; font-size: 16px;">ğŸ§¹ Reset Scores</button>
    </a>

    <!-- ğŸ  Back to Lobby -->
    <a href="/lobby/" style="margin-left: 10px;">
      <button style="padding: 10px 20px; font-size: 16px;">ğŸ  Back to Lobby</button>
    </a>
  </div>
</body>
{% endblock %}
